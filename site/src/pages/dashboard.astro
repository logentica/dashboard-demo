---
import BaseLayout from '../layouts/BaseLayout.astro';

const kpis = [
  { label: "Active members", value: "3,482", delta: "+6.2%" },
  { label: "Weekly retention", value: "41%", delta: "+2.1%" },
  { label: "Conversions", value: "128", delta: "+9.4%" },
  { label: "Revenue", value: "$7,940", delta: "+4.8%" },
];

const series = [
  { day: "Mon", v: 120 },
  { day: "Tue", v: 150 },
  { day: "Wed", v: 90 },
  { day: "Thu", v: 180 },
  { day: "Fri", v: 210 },
  { day: "Sat", v: 160 },
  { day: "Sun", v: 190 },
];

const maxV = Math.max(...series.map((s) => s.v));
const width = 640;
const height = 180;
const pad = 16;
const step = (width - pad * 2) / (series.length - 1);
const points = series
  .map((s, i) => {
    const x = pad + i * step;
    const y = pad + (1 - s.v / maxV) * (height - pad * 2);
    return `${x},${y}`;
  })
  .join(" ");
---

<BaseLayout title="Dashboard - Dashboard Demo" description="Example KPI dashboard (no auth).">
  <section class="py-12 bg-gray-50">
    <div class="container">
      <div class="max-w-5xl mx-auto">
        <div class="flex items-start justify-between gap-6">
          <div>
            <h1 class="text-3xl font-semibold tracking-tight text-gray-900">Dashboard demo</h1>
            <p class="mt-2 text-gray-600 max-w-2xl">
              A public, no-auth KPI dashboard layout you can adapt for any niche.
              Swap the dataset and labels to ship a polished prototype fast.
            </p>
          </div>
        </div>

        <section class="mt-10 grid gap-4 sm:grid-cols-2 lg:grid-cols-4">
          {kpis.map((k) => (
            <div class="card p-5">
              <div class="text-xs uppercase tracking-wider text-gray-500">{k.label}</div>
              <div class="mt-2 text-2xl font-semibold text-gray-900">{k.value}</div>
              <div class="mt-1 text-sm text-emerald-700">{k.delta}</div>
            </div>
          ))}
        </section>

        <section class="mt-6 card p-6">
          <div class="flex items-center justify-between gap-4">
            <h2 class="text-lg font-semibold text-gray-900">Engagement snapshot</h2>
            <div class="text-xs text-gray-500">Example time series</div>
          </div>
          <div class="mt-4 overflow-x-auto">
            <svg
              viewBox={`0 0 ${width} ${height}`}
              preserveAspectRatio="xMinYMin meet"
              class="block w-full min-w-[640px]"
              aria-label="Engagement time series chart"
              role="img"
            >
              <polyline
                points={points}
                fill="none"
                stroke="rgb(17 24 39)"
                stroke-width="2.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              {series.map((s, i) => {
                const x = pad + i * step;
                const y = pad + (1 - s.v / maxV) * (height - pad * 2);
                return (
                  <g>
                    <circle cx={x} cy={y} r="3.5" fill="rgb(17 24 39)" />
                    <text x={x} y={height - 4} text-anchor="middle" font-size="10" fill="rgba(17,24,39,0.6)">
                      {s.day}
                    </text>
                  </g>
                );
              })}
            </svg>
          </div>
        </section>

        <section class="mt-6 grid gap-6 lg:grid-cols-2">
          <div class="card">
            <h3 class="font-semibold text-gray-900">Integrations</h3>
            <p class="mt-2 text-sm text-gray-600">
              Replace the synthetic dataset with a real adapter: Stripe, Discord, Airtable, Shopify, or a custom API.
            </p>
          </div>
          <div class="card">
            <h3 class="font-semibold text-gray-900">Prototype delivery</h3>
            <p class="mt-2 text-sm text-gray-600">
              Designed as a public demo (no auth) so prospects can see the concept immediately.
            </p>
          </div>
        </section>
      </div>
    </div>
  </section>
</BaseLayout>
